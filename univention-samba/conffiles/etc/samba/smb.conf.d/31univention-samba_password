
	; password sync
	pam password change = no
@!@
if baseConfig['server/role'] == 'domaincontroller_master' or baseConfig['server/role'] == 'domaincontroller_backup':
	binddn='cn=admin,%s' % (baseConfig['ldap/base'])
	file="/etc/ldap.secret"
elif baseConfig['server/role'] != 'memberserver':
	binddn=baseConfig['samba/user']
	file="/etc/machine.secret"

if baseConfig['server/role']=='domaincontroller_master' or (baseConfig.has_key('samba/domainmaster') and baseConfig['samba/domainmaster']=='yes'):
	print '	unix password sync = yes'
	print '	passwd program = /usr/share/univention-admin-tools/univention-passwd --binddn "%s" --pwdfile %s --user "%%u"' % (binddn,file)
else:
	print '	unix password sync = no'
@!@


	; ldap passwd sync = yes
	passwd chat = *New*password* %n\n *Re-enter*new*password* %n\n *password*changed*
	passwd chat timeout = 60

@!@
print '\tuse spnego = %s' % baseConfig.get('samba/use_spnego', 'yes')

print '\tclient use spnego = %s' % baseConfig.get('samba/client_use_spnego', 'yes')
@!@

	obey pam restrictions = @!@
if baseConfig.has_key('samba/pam/restrictions') and baseConfig['samba/pam/restrictions']:
	print '%s' % baseConfig['samba/pam/restrictions']
else:
	print 'yes'
@!@

@!@
print '\tencrypt passwords = %s' % baseConfig.get('samba/encrypt_passwords', 'yes')
@!@
