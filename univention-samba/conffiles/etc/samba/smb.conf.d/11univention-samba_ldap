
	; ldap

@!@
if baseConfig.has_key('server/role') and baseConfig['server/role'] != 'memberserver':
	ldapserver = baseConfig['ldap/server/name'].split(' ')
	if baseConfig.get('ldap/server/addition',''):
		ldapserver.extend( baseConfig.get('ldap/server/addition').split(' ') )
	print '\tpassdb backend = ldapsam:"ldap://%s"' % ' ldap://'.join(ldapserver)
	print '\tauth methods = guest sam winbind'

if len(baseConfig.get('samba/ldap/timeout','')):
	print '\tldap timeout = %s' % baseConfig.get('samba/ldap/timeout')

print '\tldap suffix = %s' % baseConfig['ldap/base']
if baseConfig.has_key('samba/user'):
	print '\tldap admin dn = "%s"' %  baseConfig['samba/user']
elif baseConfig['server/role'] == 'domaincontroller_master':
	print '\tldap admin dn = "cn=admin,%s"' % (baseConfig['ldap/base'])
else:
	print '\tldap admin dn = "cn=backup,%s"' % (baseConfig['ldap/base'])

print '\tldap ssl = start tls'

if baseConfig.has_key('server/role') and baseConfig['server/role'] != 'memberserver':
	if baseConfig.has_key('samba/ldap/replication/sleep'):
		print '\tldap replication sleep = %s' %  baseConfig['samba/ldap/replication/sleep']

@!@

