<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
	"http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
	<!ENTITY % extensions SYSTEM "../stylesheets/macros.ent" >
	<!ENTITY % entities SYSTEM "../stylesheets/macros-de.ent" >
	%extensions;
	%DocBookDTD;
	%entities;
]>
<book lang="de" id="releasenotes-4.1R2-de">

	<bookinfo>
 		<title>UCS@school 4.1 R2 v1 Release Notes</title>
		<subtitle>Release Notes für die Inbetriebnahme und Aktualisierung von UCS@school 4.1 R2 v1</subtitle>
		<legalnotice>
			<literallayout>
Version 4.1 R2 v1
Stand: 16. Juni 2016
			</literallayout>
			<literallayout lang="">
Alle Rechte vorbehalten./ All rights reserved.
(c) 2002-2016
Univention GmbH
Mary-Somerville-Straße 1
28359 Bremen
Deutschland
feedback@univention.de
			</literallayout>
			<para>
				Jede aufgeführte Marke und jedes Warenzeichen steht im Eigentum ihrer jeweiligen eingetragenen Rechtsinhaber.
				Linux ist ein eingetragenes Warenzeichen von Linus Torvalds.
			</para>
			<para lang="en">
				The mentioned brand names and registered trademarks are owned by the respective legal owners in each case.
				Linux is a registered trademark of Linus Torvalds.
			</para>
		</legalnotice>
	</bookinfo>


	<chapter id="relnotes:highlights">
		<title>Release-Highlights</title>
		<para>
			Mit dem &ucsUAS;-Release 4.1 R2 wurden zwei grundlegende Erweiterungen vorgenommen, die von vielen Kunden gewünscht wurden:
			<itemizedlist>
				<listitem>
					<para>
						Unterstützung von schulübergreifenden Benutzerkonten für Schüler, Lehrkräfte und Mitarbeiter
					</para>
					<para>
						Das Identitäts- und Berechtigungsmanagement von &ucsUAS; wurde erweitert, so
						dass Benutzerkonten für Schüler, Lehrkräfte und Mitarbeiter zukünftig schulübergreifend verwendet
						werden können. Schulübergreifende Benutzerkonten werden an mehrere, vordefinierte Schulen
						repliziert und können in diversen Szenarien multiple Benutzerkonten ersetzen (z.B. bei Lehrern war
						zuvor häufig ein Benutzerkonto pro Schule notwendig).
						Benutzer können das gleiche Benutzerkonto an mehreren Schulen verwenden, was die
						Arbeit an den Systemen der Domäne vereinfacht und auch Vorteile bei z.B. angebundenen Cloud-Diensten
						mit sich bringt. Hinweise zur Verwendung der schulübergreifenden Benutzerkonto finden sich im
						&ucsUAS;-Handbuch.
					</para>
				</listitem>
				<listitem>
					<para>
						Vereinfachung der Automatisierung und Pflege von Benutzerkonten
					</para>
					<para>
						Schulen und Schulträger sind von ihrer Größe mit mittleren und großen
						Unternehmen zu vergleichen, jedoch mit dem Unterschied, dass sich die gesamte
						"Belegschaft" jährlich verändert. Die Automatisierung der Benutzerkontenpflege ist
						deshalb unerlässlich. 
					</para>
					<para>
						Univention hat mit &ucsUAS; 4.1 R2 die Automatisierungsmöglichkeiten stark
						erweitert, um wichtige Zusatzinformationen, wie Benutzernamen und E-Mailadressen, automatisiert und
						nach den Vorgaben der Kunden generieren zu können. Damit entfällt der Aufwand eigene Lösungen zur
						Benutzerkontenpflege zu entwickeln. Darüber hinaus haben wir Schnittstellen in &ucsUAS; geschaffen,
						über die zusätzliche Datenformate für bestehende Schulverwaltungssysteme integriert werden können,
						wie XML, JSON und CSV.  Die neue Schnittstelle zur Benutzerkontenpflege ermöglicht es, viele
						Funktionen wie z.B. Lifecycle-Management, Testläufe für den Import und das automatisierte
						Deaktivieren und Löschen von nicht mehr benötigten Nutzerkonten, umzusetzen.
					</para>
					<para>
						Durch die Einführung einer neuen Schnittstelle zur Ausführung von
						Python-Hooks können die Mechanismen zur Benutzerpflege noch einfacher, flexibler und umfangreicher
						angepasst werden.
					</para>
				</listitem>
			</itemizedlist>
		</para>
	</chapter>
	
	<chapter id="relnotes:prepare">
		<title>Hinweise zum Update</title>
		<para>
			Während der Aktualisierung kann es zu Ausfällen von Diensten innerhalb der Domäne
			kommen. Aus diesem Grund sollte das Update innerhalb eines Wartungsfensters
			erfolgen. Grundsätzlich wird empfohlen das Update zunächst in einer Testumgebung
			einzuspielen und zu testen. Die Testumgebung sollte dabei identisch zur
			Produktivumgebung sein. Je nach Systemgeschwindigkeit, Netzwerkanbindung und
			installierter Software kann das Update zwischen dreißig Minuten und mehreren Stunden
			dauern.
		</para>
		<para>
			Das Update von &ucsUAS; muss zunächst auf dem Domaincontroller Master durchgeführt
			werden, bevor das Update auf den übrigen &ucsUAS;-Systemen der Domäne gestartet werden
			kann. Ansonsten wird es zu Problemen auf den übrigen &ucsUAS;-Schulservern kommen.
		</para>
		<section id="relnote:prepare:LDAP">
			<title>Änderungen im LDAP-Verzeichnis</title>
			<para>
				Für die Umsetzung der schulübergreifenden Benutzerkonten wurden umfangreiche Änderungen am LDAP-Verzeichnisdienst notwendig:
				<itemizedlist>
					<listitem>
						<para>
							Während des Updates des Domaincontroller Master werden automatisch neue
							LDAP-Schemata für &ucsUAS; installiert und neue LDAP-Indizes für die Attribute
							<literal>ucsschoolSchool</literal>, <literal>ucsschoolSourceUID</literal> und
							<literal>ucsschoolRecordUID</literal> ergänzt. Die Index-Dateien werden in der Standardeinstellung
							automatisch aktualisiert. Je nach Umfang des LDAP-Verzeichnisdienstes kann der Aufbau der
							LDAP-Indizes einige Minuten in Anspruch nehmen.
						</para>
					</listitem>
					<listitem>
						<para>
							Mit der Installation neuer &ucsUAS;-LDAP-ACLs ändert sich das Verhalten
							der selektiven Replikation auf die Schulserver. Während bisher die Teilbäume der jeweiligen
							Schule/OU nur auf dem zugeordneten Schulserver repliziert wurde, werden jetzt auch die OUs und
							Container anderer Schulen auf alle Schulserver repliziert. Speziell handelt es sich dabei um die
							Container <literal>cn=users,ou=...,LDAP-BASIS</literal> und
							<literal>cn=groups,ou=...,LDAP-BASIS</literal>, die teilweise übertragen werden.
						</para>
						<para>
							Direkt nach dem Update auf &ucsUAS; 4.1 R2 müssen noch nicht alle
							genannten Objekte und Container auf allen Systemen vorhanden sein. Dies erfolgt bei "Bedarf" sobald
							eines der betroffenen Objekte im LDAP-Verzeichnis modifiziert wird.
						</para>
					</listitem>
					<listitem>
						<para>
							Neben den neuen LDAP-ACLs ist auch eine Anpassung der
							&ucsUAS;-Benutzerobjekte, der &ucsUAS;-Administrator-Gruppen und der Schul-OU-Objekte im
							LDAP-Verzeichnisdienst notwendig, die unterhalb der Schul-OU-Objekte bzw. in dem zentralen Container
							<literal>cn=ouadmins,cn=groups,LDAP-BASIS</literal> liegen. Während des Updates von &ucsUAS; 4.1 R2
							wird auf dem &ucsMaster; automatisch bei der Ausführung des Joinskriptes
							<filename>35ucs-school-import.inst</filename> die Anpassung der &ucsUAS;-Benutzerobjekte und
							-Gruppenobjekte vorgenommen. Dies kann je nach Umgebungsgröße einige Zeit beanspruchen und führt
							während der Anpassungen zu einer erhöhten Last bei LDAP-Servern und LDAP-Replikation.
						</para>
						<para>
							Um die automatische Anpassung zu verhindern, kann <emphasis>VOR</emphasis> dem Update auf &ucsUAS; 4.1 R2
							die &ucsUCRV; <envar>ucsschool/update/ldap/41R2</envar> auf den Wert <literal>false</literal>
							gesetzt werden. Die Anpassung der Objekte muss dann für die korrekte Funktion der
							&ucsUAS;-Umgebung manuell nachgeholt werden. Dafür muss das folgende Kommando als Benutzer
							<systemitem class="username">root</systemitem> auf dem &ucsMaster; ausgeführt werden:
							<command>/usr/share/ucs-school-import/scripts/ucs-school-migrate-objects-to-4.1R2</command>.
						</para>
					</listitem>
				</itemizedlist>
			</para>
		</section>
		<section id="relnote:prepare:legacyimport">
			<title>Importskript import_user</title>
			<para>
				Das Importskript <filename>import_user</filename> wurde vollständig überarbeitet und verwendet jetzt die neue Schnittstelle für die Benutzerpflege.
				Dies bringt die folgenden Verhaltensänderungen mit sich:
				<itemizedlist>
					<listitem>
						<para>
							Die Ausgaben des Skriptes haben sich geändert und sind jetzt wesentlich ausführlicher. Wurden die Ausgaben automatisiert ausgewertet, sind hier ggf. Anpassungen notwendig.
						</para>
					</listitem>
					<listitem>
						<para>
							In der Datei <filename>/var/log/univention/ucs-school-import.log</filename> werden die Ausgaben des Skriptes fortlaufend gesammelt.
						</para>
					</listitem>
					<listitem>
						<para>
							Wurde für einen Benutzer die OU geändert, wurde in vorherigen
							&ucsUAS;-Versionen der Benutzer in der alten Schule/OU gelöscht und in der neuen Schule/OU neu
							angelegt. Jetzt wird der Benutzer im LDAP-Verzeichnis verschoben und Gruppenmitgliedschaften
							bzw. Benutzerattribute entsprechend angepasst. Dies führt dazu, dass der Benutzer beim Verschieben
							z.B. seine Benutzernummer (uidNumber) oder Windows-Security-ID (sambaSID) beibehält.
						</para>
					</listitem>
					<listitem>
						<para>
							Die Import-Hooks unterhalb von
							<filename>/usr/share/ucs-school-import/hooks/</filename> werden ab diesem Release als veraltet
							betrachtet und mit einem zukünftigen &ucsUAS;-Release nicht mehr unterstützt.  Es wird empfohlen,
							die Import-Hooks auf die neuen Python-basierten Import-Hooks umzustellen, da diese u.a. eine bessere
							Performance liefern.
						</para>
					</listitem>
					<listitem>
						<para>
							Bei der Angabe von Klassennamen für kommandozeilenbasierte Importskripte
							(<filename>import_user</filename>, <filename>import_groups</filename> und
							<filename>ucs-school-user-import</filename>) ist jetzt immer die Angabe der Schule als Präfix
							erforderlich, z.B. <literal>gsmitte-1B</literal> für die Klasse <literal>1B</literal> an der Schule
							<literal>gsmitte</literal>. Sind im LDAP-Verzeichnis Klassennamen noch ohne Schul-Präfix vorhanden,
							sollten diese über das Skript <filename>rename_class</filename> entsprechend umbenannt werden, um
							Probleme mit den Importskripten zu vermeiden.
						</para>
						<para>
							Die UMC-Module sind von dieser neuen Anforderung nicht betroffen. Hier
							wird der Schul-Präfix bei der Anzeige automatisch entfernt und nach Benutzereingaben automatisch
							hinzugefügt. D.h. in den UMC-Modulen <guimenu>Benutzer (Schulen)</guimenu> und
							<guimenu>CSV-Import</guimenu> reicht die Angabe des Klassennamens (z.B. <literal>1B</literal>) aus.
						</para>
					</listitem>
				</itemizedlist>
			</para>
		</section>
	</chapter>

	<chapter id="relnotes:preparations">
	  <title>Vorbereitung von Installation und Update</title>
	  <para>
		Es sollte geprüft werden, ob ausreichend Festplattenplatz verfügbar ist. Eine
		Standard-Installation benötigt min. 6 GB Speicherplatz. Das Update benötigt je nach Umfang
		der vorhanden Installation mindestens 1,0 GB weiteren Speicherplatz zum Herunterladen und
		Installieren der Pakete.
	  </para>

	  <para>
		Für das Update sollte eine Anmeldung auf der lokalen Konsole des Systems mit dem Benutzer
		<emphasis>root</emphasis> durchgeführt und das Update dort gestartet werden. Alternativ
		kann das Update über die &ucsUMC; durchgeführt werden.
	  </para>

	  <para>
		Eine Remote-Aktualisierung über SSH wird nicht empfohlen, da dies beispielsweise bei
		Unterbrechung der Netzverbindung zum Abbruch des Update-Vorgangs und zu einer
		Beeinträchtigung des Systems führen kann. Sollte dennoch eine Aktualisierung über eine
		Netzverbindung durchgeführt werden, ist sicherzustellen, dass das Update bei einer Unterbrechung
		der Netzverbindung trotzdem weiterläuft. Hierfür können beispielsweise die Tools
		<command>screen</command> oder <command>at</command> eingesetzt werden, die auf allen
		Systemrollen installiert sind.
	  </para>
	</chapter>

	<chapter id="relnotes:post">
		<title>Nachbereitung des Updates</title>
		<para>
			Nach dem Update müssen die neuen oder aktualisierten Join-Skripte ausgeführt werden. Dies
			kann auf zwei Wegen erfolgen: 
		</para>
		<itemizedlist>
		  <listitem>
			<para>
			  über das UMC-Modul <guimenu>Domänenbeitritt</guimenu> oder
			</para>
		  </listitem>
		  <listitem>
			<para>
			  durch Aufruf des Befehls <command>univention-run-join-scripts</command> als Benutzer <emphasis>root</emphasis>.
			</para>
		  </listitem>
		</itemizedlist>
	</chapter>

	<chapter id="relnotes:umc">
		<title>Hinweise zum Zugriff auf die Univention Management Console</title>
			<para>
				&ucsUMC; verwendet für die Darstellung der Web-Oberfläche zahlreiche Javascript- und
				CSS-Funktionen. Cookies müssen im Browser zugelassen sein. Die folgenden Browser werden
				empfohlen:
			</para>
			<itemizedlist>
				<listitem>
					<para>Chrome ab Version 33</para>
				</listitem>
				<listitem>
					<para>Firefox ab Version 24</para>
				</listitem>
				<listitem>
					<para>Internet Explorer ab Version 9 </para>
				</listitem>
				<listitem>
					<para>Safari und Safari Mobile ab Version 7</para>
				</listitem>
			</itemizedlist>
			<para>
			  Auf älteren Browsern können Darstellungs- oder Performanceprobleme auftreten.
			</para>
	</chapter>

	<chapter id="relnotes:changes">
		<title>Changelog</title>
		<para>
		  Die Changelogs mit den detaillierten Änderungsinformationen werden nur in Englisch
		  gepflegt. Aufgeführt sind die Änderungen zwischen den &ucsUAS;-Versionen 4.1 v5 und 4.1 R2 v1. Die
		  Änderungsinformationen für vorherige Versionssprünge finden sich unter <ulink
		  url="https://docs.software-univention.de/"/>.
		</para>
		<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="changelog-ucsschool-4.1R2v1.xml" xpointer="xpointer(/chapter/section)"/>
	</chapter>
</book>
