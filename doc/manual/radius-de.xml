<chapter>
	<title>Authentifizierung des WLAN-Zugriffs über RADIUS</title>
	<para>
		RADIUS ist ein Authentifizierungsprotokoll für Rechner in
		Computernetzen. Es wird in &ucsUAS; für die Authentifizierung von
		Rechnern für den Wireless-LAN-Zugriff eingesetzt.
	</para>
	<para>
		Der RADIUS-Server muss auf den Access Points konfiguriert werden.
		Die vom Client übertragenen Benutzerkennungen werden dann durch den
		festgelegten RADIUS-Server geprüft, der wiederum für die Authentifizierung auf
		den UCS-Verzeichnisdienst zugreift.
	</para>

	<section>
		<title>Installation und Konfiguration des RADIUS-Servers</title>
		<para>
			Um RADIUS-Unterstützung einzurichten muss das Paket
			<package>ucs-school-radius-802.1x</package> auf dem Schulserver der Schule
			installiert werden, in der WLAN-Authentifizierung eingerichtet werden
			soll. Außerdem muss das Paket <package>ucs-school-webproxy</package> auf dem
			Schulserver installiert sein.
		</para>
		<para>
			Nun müssen alle Access Points der Schule in der Konfigurationsdatei
			<filename>/etc/freeradius/clients.conf</filename> registriert werden. Pro Access
			Point sollte ein zufälliges Passwort erstellt werden. Dies kann
			z.B. mit dem Befehl <command>makepasswd</command> geschehen. Die
			Kurzbezeichnung ist frei wählbar. Ein Beispiel für einen solchen
			Eintrag für einen Access Point:
		</para>
		<programlisting>
client 192.168.100.101 {
    secret = a9RPAeVG
    shortname = AP01
}
		</programlisting>
	</section>

	<section>
		<title>Konfiguration der Access Points</title>
		<para>
			Nun müssen die Access Points konfiguriert werden. Die dafür nötigen
			Schritte unterscheiden sich je nach Hardwaremodell, prinzipiell müssen
			die folgenden vier Optionen konfiguriert werden:
		</para>
		<itemizedlist>
			<listitem>
				<simpara>
					Der Authentifizierungmodus muss auf RADIUS-Authentifzierung
					umgestellt werden (diese Option wird oft auch als 'WPA Enterprise'
					bezeichnet)
				</simpara>
			</listitem>
			<listitem>
				<simpara>
					Die IP-Adresse des Schulservers muss als RADIUS-Server angegeben
					werden
				</simpara>
			</listitem>
			<listitem>
				<simpara>
					Der Radius-Port ist 1812 (sofern kein abweichender Port in
					Freeradius konfiguriert wurde)
				</simpara>
			</listitem>
			<listitem>
				<simpara>
					Das in der <filename>/etc/freeradius/clients.conf</filename>
					hinterlegte Passwort
				</simpara>
			</listitem>
		</itemizedlist>
	</section>

	<section>
		<title>Konfiguration der zugreifenden Clients</title>
		<para>
			Der zugreifende Client muss das SSL-Zertifikat des Radius-Servers
			importieren und eine Netzwerkverbindung mit den folgenden Parametern
			konfigurieren:
		</para>
		<itemizedlist>
			<listitem>
				<simpara>
					Authentifizierung per WPA und TKIP als Verschlüsselungsverfahren
				</simpara>
			</listitem>
			<listitem>
				<simpara>
					PEAP und MSCHAPv2 als Authentifizierungsprotokoll
				</simpara>
			</listitem>
		</itemizedlist>
		<para>
			Die Konfiguration unterscheidet sich je nach Betriebsystem des Clients. Im
			Univention Wiki findet sich eine exemplarische
			Schritt-für-Schritt-Anleitung für die Einrichtung unter Windows XP:
			<ulink url="http://wiki.univention.de/index.php?title=Einrichtung-WLAN-Authentifizierung-WinXP"/>.
		</para>
	</section>

	<section>
		<title>Freigabe des WLAN-Zugriffs in der &ucsUMC;</title>
		<para>
			In der Grundeinstellung ist der WLAN-Zugriff nicht zugelassen. Um
			einzelnen Benutzergruppen WLAN-Zugriff zu gestatten, muss in
			der &ucsUMC; im Modul <guimenu>Internetregeln definieren</guimenu> eine
			Regel hinzugefügt - oder eine bestehende editiert werden -, in der die
			Option <guimenu>WLAN-Authentifizierung aktiviert</guimenu> aktiviert ist.
		</para>
		<para>
			Weiterführende Dokumentation zur Freigabe des WLAN-Zugriffs finden sich in der
			&ucsUAS;-Lehrerdokumentation <xref linkend="ucs-school-teacher"/>.
		</para>
	</section>

	<section>
		<title>Fehlersuche</title>
		<para>
			Im Fehlerfall sollte die
			Logdatei <filename>/var/log/freeradius/radius.log</filename> geprüft
			werden. Erfolgreiche Logins führen zu einem Logeintrag <emphasis>Auth:
			Login OK</emphasis> und eine fehlgeschlagene Authentifizierung beispielsweise
			zu <emphasis>Auth: Login incorrect</emphasis>.
		</para>
	</section>
</chapter>
